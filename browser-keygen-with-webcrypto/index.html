<!DOCTYPE html>
<html>
    <head>
        <title>Dogtag PKI | Browser Keygen</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    </head>
    <body>
        <nav role="navigation" class="deep-purple accent-2">
            <div class="nav-wrapper container">
                <a class="brand-logo">Dogtag PKI | Browser Keygen</button>
            </div>
        </nav>
        <div id="content" class="container">
            <div class="container form">
                <h3>(DEMO) Generate CA</h3>
                <p>This won't be here ordinarily.</p>
                <div class="input-field">
                    <select id="keytype" onChange="changeCAKeySize()">
                        <option value="RSA">RSA</option>
                        <option value="ECDSA">ECDSA</option>
                    </select>
                    <label>CA Key Type</label>
                </div>
                <div class="input-field">
                    <select id="keysize-rsa">
                        <option value="2048">2048</option>
                        <option value="3072">3072</option>
                        <option value="4096">4096</option>
                    </select>
                    <select id="keysize-ecdsa">
                        <option value="P-256">P-256</option>
                        <option value="P-384">P-384</option>
                        <option value="P-521">P-521</option>
                    </select>
                    <label>CA Key Size</label>
                </div>
                <p id='ca-keys'>
                </p>
                <script>
                    function changeCAKeySize() {
                        var input = document.getElementById('keytype');
                        if (input.value == 'RSA') {
                            document.getElementById('keysize-rsa').style.display = 'block';
                            document.getElementById('keysize-ecdsa').style.display = 'none';
                        } else {
                            document.getElementById('keysize-rsa').style.display = 'none';
                            document.getElementById('keysize-ecdsa').style.display = 'block';
                        }
                    }
                    changeCAKeySize();

                    async function genCA() {
                        var type = document.getElementById('keytype').value.toLowerCase();
                        var size = document.getElementById('keysize-' + type).value;
                        window.ca_keys = await generate(type === 'rsa', size, size);
                        document.getElementById('ca-keys').innerText = 'Generated new ' + type + ' CA keys.';
                    }
                </script>
                <button onClick="genCA()">Generate Key Pair</button>
            </div>
            <div class="container form">
                <h3>Key Generation</h3>
                <p>Add instructions for generating keys offline.</p>
                <button onClick="generate(true, 4096);">Generate Key Pair</button>
                <button>Add Private Key (KRA only)</button>
                <button>Add Public Key</button>
                <button>Add .p12</button>
            </div>
            <div class="container form">
                <h3>Certificate Signing Request</h3>
                <button>Load CSR</button>
                <div class="row">
                    <div class="col s12 input-field">
                        <input id="Subject" type="text" class="validate">
                        <label for="Subject">Subject</label>
                    </div>
                </div>
                <div class="row">
                    <div class="col s5 input-field">
                        <input id="City" type="text" class="validate">
                        <label for="City">City</label>
                    </div>
                    <div class="col s5 input-field">
                        <input id="State" type="text" class="validate">
                        <label for="State">State</label>
                    </div>
                    <div class="col s2 input-field">
                        <input id="Country" type="text" class="validate">
                        <label for="Country">Country</label>
                    </div>
                </div>
                <div class="row">
                    <div class="col s6 input-field">
                        <input id="OrgUnit" type="text" class="validate">
                        <label for="OrgUnit">Unit</label>
                    </div>
                    <div class="col s6 input-field">
                        <input id="Org" type="text" class="validate">
                        <label for="Org">Organization</label>
                    </div>
                </div>
                <button>Generate CSR</button>
                <button>Save CSR</button>
            </div>
            <div class="container form">
                <h3>Submit for signing</h3>
                <button>Submit for Signing</button>
                <button>Submit for Archival</button>
                <button>Download Signed Certificate</button>
            </div>
        </div>
        <script src="js/app.js"></script>
    </body>
</html>
