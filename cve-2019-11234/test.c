#include <stdio.h>
#include <openssl/bn.h>
#include <openssl/sha.h>
#include <openssl/ec.h>
#include <openssl/evp.h>
#include <openssl/hmac.h>


int main() {
    BN_CTX *bnctx = BN_CTX_new();
    EC_GROUP *group = EC_GROUP_new_by_curve_name(NID_X9_62_prime256v1);
    EC_POINT *infty_1 = EC_POINT_new(group);
    EC_POINT *infty_2 = EC_POINT_new(group);
    EC_POINT_set_to_infinity(group, infty_1);
    EC_POINT_set_to_infinity(group, infty_2);

    EC_POINT *infty_3 = EC_POINT_new(group);
    if (!EC_POINT_add(group, infty_3, infty_1, infty_2, bnctx)) {
	printf("Error: unable to add points.\n");
	return 2;
    }

    int at_infty = EC_POINT_is_at_infinity(group, infty_3);
    printf("is_at_infinity: %d\n", at_infty);

    return at_infty;
}
